{
  "hash": "6f4bc6a8df1781a1835c4f8702223362",
  "result": {
    "markdown": "---\ntitle: \"Análise de Sobrevivência\"\nsubtitle: \"Modelos Paramétricos\"\nauthor: \"Ricardo Accioly\"\nformat:\n  revealjs:\n    slide-number: true\n    css: styles.css\n    theme: dark\n    footer: \"IME05-12532 - Análise de Sobrevivência\"\n---\n\n::: {.cell}\n\n:::\n\n\n## Modelos Paramétricos\n\nNeste exemplo são considerados os tempos de reincidência, em meses, de um grupo de 20 pacientes com cancer de bexiga que foram submetidos a um procedimento cirurgico feito por laser.\n\nVamos ver passo a passo como ajustar os modelos exponencial, Weibull e lognormal.\n\nAqui vamos utilizar as funções existentes no pacote `survival`.\n\nPara ajustar um modelo paramétrico usamo a função `survreg`.\n\n## Metodo de Kaplan-Meier\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(survival)\ntempos<-c(3,5,6,7,8,9,10,10,12,15,15,18,19,20,22,25,28,30,40,45)\ncens<-c(1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0)\ndados <- data.frame(tempos=tempos, status=cens)\nekm <- survfit(Surv(tempos,status)~1, data=dados)\nsummary(ekm)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall: survfit(formula = Surv(tempos, status) ~ 1, data = dados)\n\n time n.risk n.event survival std.err lower 95% CI upper 95% CI\n    3     20       1   0.9500  0.0487      0.85913        1.000\n    5     19       1   0.9000  0.0671      0.77767        1.000\n    6     18       1   0.8500  0.0798      0.70707        1.000\n    7     17       1   0.8000  0.0894      0.64257        0.996\n    8     16       1   0.7500  0.0968      0.58233        0.966\n    9     15       1   0.7000  0.1025      0.52541        0.933\n   10     14       1   0.6500  0.1067      0.47124        0.897\n   12     12       1   0.5958  0.1107      0.41402        0.857\n   15     11       1   0.5417  0.1131      0.35976        0.816\n   18      9       1   0.4815  0.1154      0.30096        0.770\n   19      8       1   0.4213  0.1156      0.24601        0.721\n   20      7       1   0.3611  0.1137      0.19481        0.669\n   22      6       1   0.3009  0.1095      0.14745        0.614\n   25      5       1   0.2407  0.1028      0.10422        0.556\n   28      4       1   0.1806  0.0931      0.06573        0.496\n   30      3       1   0.1204  0.0792      0.03317        0.437\n   40      2       1   0.0602  0.0581      0.00907        0.399\n```\n:::\n:::\n\n\n## Curva de Sobrevivência não paramétrica\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(ekm, xlab=\"Tempo (meses)\",ylab=\"S(t) estimada\")\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n\n## Taxa de Falhas não paramétrica\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusteKM <- survfit(Surv(tempos, status) ~ 1, data=dados)\najusteKM_sum <- summary(ajusteKM)\npesos <- ajusteKM_sum$n.event/ajusteKM_sum$n.risk\nh <- density(ajusteKM_sum$time, weights = pesos, \n             kernel = \"gaussian\", n = 100, from = 0, to = 45)\nplot(h$x, h$y, type = \"l\", xlab = \"Tempo (meses)\", ylab = \"Taxa de Falhas\")\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n\n## Quantis não parametricos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(survey)\ndados_p <- svydesign(ids = ~1, data=dados)\ndados_svykm <- svykm(Surv(tempos, status) ~ 1, dados_p, se=TRUE)\nmediana.km <- quantile(dados_svykm, 0.5, ci=TRUE)\nmed.km <- c(mediana.km[1], attr(mediana.km, \"ci\")[1], attr(mediana.km, \"ci\")[2])\nnames(med.km) <- c(\"mediana KM\",\"ICI\",\"ICS\")\nmed.km\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana KM        ICI        ICS \n        18         10         28 \n```\n:::\n:::\n\n\n## Modelo Exponencial\n\n\n::: {.cell}\n\n```{.r .cell-code}\najustExp <- survreg(Surv(tempos,status)~1, \n                    data=dados, dist='exponential')\najustExp\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\nsurvreg(formula = Surv(tempos, status) ~ 1, data = dados, dist = \"exponential\")\n\nCoefficients:\n(Intercept) \n   3.016111 \n\nScale fixed at 1 \n\nLoglik(model)= -68.3   Loglik(intercept only)= -68.3\nn= 20 \n```\n:::\n\n```{.r .cell-code}\nalfa <- exp(ajustExp$coefficients[1])\nalfa\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(Intercept) \n   20.41176 \n```\n:::\n:::\n\n\n## Taxa de falhas NP vs Exp {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusteKM <- survfit(Surv(tempos, status) ~ 1, data=dados)\najusteKM_sum <- summary(ajusteKM)\npesos <- ajusteKM_sum$n.event/ajusteKM_sum$n.risk\nh <- density(ajusteKM_sum$time, weights = pesos, \n             kernel = \"gaussian\", n = 100, from = 0, to = 45)\nplot(h$x, h$y, type = \"l\", xlab = \"Tempo (meses)\", ylab = \"Taxa de Falhas\")\nexpHaz <- function(x, rate) { \n  dexp(x, rate=rate)/\n    pexp(x, rate=rate, lower.tail=F)\n}\ncurve(expHaz(x, rate=1/alfa), from=0, to=45,\n      ylab=\"h(t)\", xlab=\"Tempo\", \n      col=\"red\", ylim=c(0,1),\n      add=TRUE)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Taxa de falhas NP vs Exp\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n## Quantis do Modelo Exponencial\n\n::: panel-tabset\n\n### Cálculos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nest_med <- predict(ajustExp,type=\"uquantile\",p=0.5,se.fit=T)\nest_med1 <- est_med$fit[1]\nest_med1.ep <- est_med$se.fit[1]\n\nIC.mediana_exp <- c(exp(est_med1),exp(est_med1-1.96*est_med1.ep),\nexp(est_med1+1.96*est_med1.ep))\nnames(IC.mediana_exp) <- c(\"mediana Exp\",\"ICI\",\"ICS\")\n```\n:::\n\n\n### Resultados\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#IC Mediana\nIC.mediana_exp\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana Exp         ICI         ICS \n  14.148357    8.795399   22.759175 \n```\n:::\n:::\n\n\n:::\n\n## Avaliação do modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(car)\nn.censurado <- dados$tempos[dados$status == 1]\nqqPlot(n.censurado,\ndist = \"exp\",\nrate = 1/alfa,\nxlab = \"Quantis Teoricos (exponencial)\",\nylab = \"Quantis Empiricos\")\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n## Avaliação do modelo Exponencial\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-11-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n\n\n## Modelo Weibull\n\n::: panel-tabset\n\n### Ajuste do modelo\n\n::: {.cell}\n\n```{.r .cell-code}\najustWei <- survreg(Surv(tempos,status)~1, data=dados, dist='weibull')\najustWei\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\nsurvreg(formula = Surv(tempos, status) ~ 1, data = dados, dist = \"weibull\")\n\nCoefficients:\n(Intercept) \n   3.060529 \n\nScale= 0.647922 \n\nLoglik(model)= -66.1   Loglik(intercept only)= -66.1\nn= 20 \n```\n:::\n\n```{.r .cell-code}\nalfaw <- exp(ajustWei$coefficients[1])\nbetaw <- 1/ajustWei$scale\n```\n:::\n\n\n### Parametros do modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Alfa - parametro de escala\nalfaw\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(Intercept) \n   21.33885 \n```\n:::\n\n```{.r .cell-code}\n# Beta - parametro de forma\nbetaw\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.543396\n```\n:::\n:::\n\n\n:::\n\n## Taxa de Falhas NP vs Weibull {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusteKM <- survfit(Surv(tempos, status) ~ 1, data=dados)\najusteKM_sum <- summary(ajusteKM)\npesos <- ajusteKM_sum$n.event/ajusteKM_sum$n.risk\nh <- density(ajusteKM_sum$time, weights = pesos, \n             kernel = \"gaussian\", n = 100, from = 0, to = 45)\nplot(h$x, h$y, type = \"l\", xlab = \"Tempo (meses)\", ylab = \"Taxa de Falhas\",\n     ylim=c(0,0.10))\nweibHaz <- function(x, shape, scale) { \n  dweibull(x, shape=shape, scale=scale)/\n  pweibull(x, shape=shape, scale=scale,\n           lower.tail=F)\n}\ncurve(weibHaz(x, shape=betaw, scale=alfaw), \n      from=0, to=45,\n      ylab=\"h(t)\", xlab=\"Tempo\", col=\"red\",\n      add=TRUE)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n## Taxa de Falhas NP vs Weibull\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n\n## Quantis do Modelo Weibull\n\n::: panel-tabset\n\n### Cálculos\n\n\n::: {.cell}\n\n```{.r .cell-code}\najustWei <- survreg(Surv(tempos,status)~1, data=dados, dist='weibull')\nestmedw <- predict(ajustWei,type=\"uquantile\",p=0.5,se.fit=T)\nestmedw1 <- estmedw$fit[1]\nestmedw1.ep <- estmedw$se.fit[1]\nIC.mediana_w <- c(exp(estmedw1),exp(estmedw1-1.96*estmedw1.ep),\nexp(estmedw1+1.96*estmedw1.ep))\nnames(IC.mediana_w) <- c(\"mediana Wei\",\"ICI\",\"ICS\")\n```\n:::\n\n\n\n### Resultados\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Mediana\nIC.mediana_w\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana Wei         ICI         ICS \n   16.82823    11.95670    23.68456 \n```\n:::\n:::\n\n\n\n:::\n\n## Avaliação do Modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn.censurado <- dados$tempos[dados$status == 1]\nqqPlot(n.censurado,\ndist = \"weibull\",\nshape = betaw,\nscale = alfaw,\nxlab = \"Quantis Teoricos (Weibull)\",\nylab = \"Quantis Empiricos\")\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-18-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n## Avaliação do Modelo Weibull\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-19-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n\n## Modelo Lognormal\n\n::: panel-tabset\n\n### Ajuste do modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\najustLog <- survreg(Surv(tempos, status)~1, data=dados, dist='lognorm')\najustLog\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\nsurvreg(formula = Surv(tempos, status) ~ 1, data = dados, dist = \"lognorm\")\n\nCoefficients:\n(Intercept) \n   2.717176 \n\nScale= 0.7648167 \n\nLoglik(model)= -65.7   Loglik(intercept only)= -65.7\nn= 20 \n```\n:::\n\n```{.r .cell-code}\nmulog <- ajustLog$icoef[1]\nsigmalog <- ajustLog$scale\n```\n:::\n\n\n### Parametros do modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Media\nmulog\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(Intercept) \n   2.717176 \n```\n:::\n\n```{.r .cell-code}\n# Desvio padrão\nsigmalog\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.7648167\n```\n:::\n:::\n\n\n:::\n\n## Taxa de Falhas NP vs Lognormal {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusteKM <- survfit(Surv(tempos, status) ~ 1, data=dados)\najusteKM_sum <- summary(ajusteKM)\npesos <- ajusteKM_sum$n.event/ajusteKM_sum$n.risk\nh <- density(ajusteKM_sum$time, weights = pesos, \n             kernel = \"gaussian\", n = 100, from = 0, to = 45)\nplot(h$x, h$y, type = \"l\", xlab = \"Tempo (meses)\", ylab = \"Taxa de Falhas\",\n     ylim=c(0,0.10))\nlogHaz <- function(x, meanlog, sdlog) {\n  dlnorm(x, meanlog=meanlog, sdlog=sdlog)/\n  plnorm(x, meanlog=meanlog, sdlog=sdlog, \n         lower.tail=F)\n}\ncurve(logHaz(x, meanlog=mulog, sdlog=sigmalog), from=0, to=45,\n      ylab=\"h(t)\", xlab=\"Tempo\", \n      col=\"red\",\n      add=TRUE)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-22-1.png){width=960}\n:::\n:::\n\n\n## Taxa de Falhas NP vs Lognormal {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-23-1.png){width=960}\n:::\n:::\n\n\n## Quantis do Modelo Lognormal\n\n\n::: {.cell}\n\n```{.r .cell-code}\najustLog <- survreg(Surv(tempos, status)~1, data=dados, dist='lognorm')\nestmedl <- predict(ajustLog,type=\"uquantile\",p=0.5,se.fit=T)\nestmedl1 <- estmedl$fit[1]\nestmedl1.ep <- estmedl$se.fit[1]\nIC.mediana_log <- c(exp(estmedl1),exp(estmedl1-1.96*estmedl1.ep),\nexp(estmedl1+1.96*estmedl1.ep))\nnames(IC.mediana_log) <- c(\"mediana Logn\",\"ICI\",\"ICS\")\nIC.mediana_log\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana Logn          ICI          ICS \n    15.13751     10.71601     21.38334 \n```\n:::\n:::\n\n\n## Avaliação do Modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn.censurado <- dados$tempos[dados$status == 1]\nqqPlot(n.censurado,\ndist = \"lnorm\",\nmeanlog = mulog,\nsdlog = sigmalog,\nxlab = \"Quantis Teoricos (Lognormal)\",\nylab = \"Quantis Empiricos\")\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-25-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n## Avaliação do Modelo Lognormal\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-26-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n\n## Modelo Loglogístico {.smaller}\n\n::: panel-tabset\n\n### Ajuste do modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\najustLLog <- survreg(Surv(tempos, status)~1, data=dados, dist='loglogistic')\najustLLog\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\nsurvreg(formula = Surv(tempos, status) ~ 1, data = dados, dist = \"loglogistic\")\n\nCoefficients:\n(Intercept) \n   2.737415 \n\nScale= 0.4496653 \n\nLoglik(model)= -66   Loglik(intercept only)= -66\nn= 20 \n```\n:::\n\n```{.r .cell-code}\nbetall<- ajustLLog$icoef[1]\nalfall <- ajustLLog$scale\nmullog <- betall\nsigmallog <- alfall\n```\n:::\n\n\n### Parametros do modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Media\nbetall\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(Intercept) \n   2.737415 \n```\n:::\n\n```{.r .cell-code}\n# Desvio padrão\nalfall\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.4496653\n```\n:::\n:::\n\n\n:::\n\n## Taxa de Falhas NP vs Loglogística {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusteKM <- survfit(Surv(tempos, status) ~ 1, data=dados)\najusteKM_sum <- summary(ajusteKM)\npesos <- ajusteKM_sum$n.event/ajusteKM_sum$n.risk\nh <- density(ajusteKM_sum$time, weights = pesos, \n             kernel = \"gaussian\", n = 100, from = 0, to = 45)\nplot(h$x, h$y, type = \"l\", xlab = \"Tempo (meses)\", ylab = \"Taxa de Falhas\",\n     ylim=c(0,0.15))\nlibrary(flexsurv)\nllogisHaz <- function(x, alfa, beta) {\n  haz <- hllogis(x, shape = beta, scale = alfa, log = FALSE)\n}\ncurve(llogisHaz(x, alfa=alfall, beta=betall), from=0, to=45,\n      ylab=\"h(t)\", xlab=\"Tempo\", col=\"red\", add=TRUE)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-29-1.png){width=960}\n:::\n:::\n\n\n## Taxa de Falhas NP vs Loglogística\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-30-1.png){width=960}\n:::\n:::\n\n\n\n## Quantis do Modelo LogLogístico\n\n\n::: {.cell}\n\n```{.r .cell-code}\najustLLog <- survreg(Surv(tempos, status)~1, data=dados, dist='loglogistic')\nestmedll <- predict(ajustLLog,type=\"uquantile\",p=0.5,se.fit=T)\nestmedll1 <- estmedll$fit[1]\nestmedll1.ep <- estmedll$se.fit[1]\nIC.mediana_llog <- c(exp(estmedll1),exp(estmedll1-1.96*estmedll1.ep),\nexp(estmedll1+1.96*estmedll1.ep))\nnames(IC.mediana_llog) <- c(\"mediana LogL\",\"ICI\",\"ICS\")\nIC.mediana_llog\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana LogL          ICI          ICS \n    15.44700     10.85399     21.98361 \n```\n:::\n:::\n\n\n## Avaliação do Modelo\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn.censurado <- dados$tempos[dados$status == 1]\nqqPlot(n.censurado,\n       dist = \"llogis\",\n       shape = betall,\n       scale = alfall,\n       xlab = \"Quantis Teoricos (LogLogistico)\",\n       ylab = \"Quantis Empiricos\")\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-32-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n## Avaliação do Modelo LogLogístico\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-33-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17 16\n```\n:::\n:::\n\n\n\n## Curvas de Sobrevivência {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntempo <- ekm$time\nst <- ekm$surv\nste <- exp(-tempo/alfa)\nstw <- exp(-(tempo/alfaw)^betaw)\nstln <- pnorm((-log(tempo) + mulog)/sigmalog)\nstll <- plogis((-log(tempo) + mullog)/sigmallog)\ncbind(tempo,st,ste,stw,stln, stll)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      tempo         st       ste        stw       stln      stll\n [1,]     3 0.95000000 0.8633164 0.95274148 0.98283934 0.9745310\n [2,]     5 0.90000000 0.7827384 0.89897484 0.92624322 0.9247343\n [3,]     6 0.85000000 0.7453152 0.86839357 0.88685752 0.8911964\n [4,]     7 0.80000000 0.7096812 0.83609525 0.84337638 0.8532358\n [5,]     8 0.75000000 0.6757509 0.80253272 0.79781416 0.8120295\n [6,]     9 0.70000000 0.6434428 0.76809812 0.75169629 0.7687589\n [7,]    10 0.65000000 0.6126794 0.73313414 0.70611769 0.7245227\n [8,]    12 0.59583333 0.5554947 0.66278292 0.61931883 0.6368104\n [9,]    15 0.54166667 0.4795676 0.55966698 0.50475984 0.5163200\n[10,]    18 0.48148148 0.4140186 0.46346069 0.41042396 0.4157713\n[11,]    19 0.42129630 0.3942241 0.43345774 0.38317692 0.3868919\n[12,]    20 0.36111111 0.3753760 0.40461041 0.35784922 0.3602069\n[13,]    22 0.30092593 0.3403401 0.35056108 0.31248031 0.3129370\n[14,]    25 0.24074074 0.2938212 0.27891623 0.25592025 0.2552681\n[15,]    28 0.18055556 0.2536607 0.21851514 0.21065456 0.2103630\n[16,]    30 0.12037037 0.2299851 0.18419003 0.18556452 0.1860066\n[17,]    40 0.06018519 0.1409071 0.07154720 0.10195229 0.1075572\n[18,]    45 0.06018519 0.1102934 0.04229094 0.07714984 0.0848755\n```\n:::\n:::\n\n\n## Quantis\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmed.km\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana KM        ICI        ICS \n        18         10         28 \n```\n:::\n\n```{.r .cell-code}\nIC.mediana_exp\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana Exp         ICI         ICS \n  14.148357    8.795399   22.759175 \n```\n:::\n\n```{.r .cell-code}\nIC.mediana_w\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana Wei         ICI         ICS \n   16.82823    11.95670    23.68456 \n```\n:::\n\n```{.r .cell-code}\nIC.mediana_log\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana Logn          ICI          ICS \n    15.13751     10.71601     21.38334 \n```\n:::\n\n```{.r .cell-code}\nIC.mediana_llog\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmediana LogL          ICI          ICS \n    15.44700     10.85399     21.98361 \n```\n:::\n:::\n\n\n## Comparação NP vs Paramétrico\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow=c(1,2))\nplot(st,ste,pch=16,ylim=range(c(0.0,1)), xlim=range(c(0,1)), xlab = \"S(t): Kaplan-Meier\", ylab=\"S(t): exponencial\")\nlines(c(0,1), c(0,1), type=\"l\", lty=1)\nplot(st,stw,pch=16,ylim=range(c(0.0,1)), xlim=range(c(0,1)), xlab = \"S(t): Kaplan-Meier\",\n     ylab=\"S(t): Weibull\")\nlines(c(0,1), c(0,1), type=\"l\", lty=1)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-36-1.png){width=960}\n:::\n:::\n\n\n## Comparação NP vs Paramétrico\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow=c(1,2))\nplot(st,stln,pch=16,ylim=range(c(0.0,1)), xlim=range(c(0,1)), xlab = \"S(t): Kaplan-Meier\",\n     ylab=\"S(t): Log-normal\")\nlines(c(0,1), c(0,1), type=\"l\", lty=1)\nplot(st,stll,pch=16,ylim=range(c(0.0,1)), xlim=range(c(0,1)), xlab = \"S(t): Kaplan-Meier\",\n     ylab=\"S(t): log-Logistica\")\nlines(c(0,1), c(0,1), type=\"l\", lty=1)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-37-1.png){width=960}\n:::\n:::\n\n\n## Comparação NP vs Paramétrico\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow=c(1,2))\nplot(ekm, conf.int=F, xlab=\"Tempos\", ylab=\"S(t)\")\nlines(c(0,tempo),c(1,ste), lty=2)\nlegend(25,0.8,lty=c(1,2),c(\"Kaplan-Meier\", \"Exponencial\"),bty=\"n\",cex=0.8)\nplot(ekm, conf.int=F, xlab=\"Tempos\", ylab=\"S(t)\")\nlines(c(0,tempo),c(1,stw), lty=2)\nlegend(25,0.8,lty=c(1,2),c(\"Kaplan-Meier\", \"Weibull\"),bty=\"n\",cex=0.8)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-38-1.png){width=960}\n:::\n:::\n\n\n## Comparação NP vs Paramétrico\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow=c(1,2))\nplot(ekm, conf.int=F, xlab=\"Tempos\", ylab=\"S(t)\")\nlines(c(0,tempo),c(1,stln), lty=2)\nlegend(25,0.8,lty=c(1,2),c(\"Kaplan-Meier\", \"Lognormal\"),bty=\"n\",cex=0.8)\nplot(ekm, conf.int=F, xlab=\"Tempos\", ylab=\"S(t)\")\nlines(c(0,tempo),c(1,stll), lty=2)\nlegend(25,0.8,lty=c(1,2),c(\"Kaplan-Meier\", \"LogLogistica\"),bty=\"n\",cex=0.8)\n```\n\n::: {.cell-output-display}\n![](Aula04_files/figure-revealjs/unnamed-chunk-39-1.png){width=960}\n:::\n:::\n",
    "supporting": [
      "Aula04_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}