{
  "hash": "08d498dd8ac1d3c357a7e07b52c235a8",
  "result": {
    "markdown": "---\ntitle: \"Análise de Sobrevivência\"\nsubtitle: \"Modelos não Paramétricos\"\nauthor: \"Prof. Ricardo Accioly\"\nformat:\n  revealjs:\n    slide-number: true\n    css: styles.css\n    theme: dark\n    footer: \"IME05-12532 - Análise de Sobrevivência\"\n---\n\n\n## Análise de Sobrevivência (1)\n\nNesta apresentação vamos ver passo a passo como obter uma estimativa da curva de sobrevivência através do método de Kaplan-Meier.\n\nVamos inicialmente utilizar o pacote `survival` que é a principal referência em modelos de análise de sobrevivência.\n\n## Análise de Sobrevivência (2)\n\nVamos usar neste exemplo dados de pacientes com leucemia.\n\nO objetivo é verificar se o tratamento proposto, 6MP, tem efeito sobre a doença.\n\nExistem dois grupos de pacientes:\n\n-   21 receberam 6MP que é um medicamento para tratar leucemia\n-   Os outros 21 receberam placebo.\n\n::: {.fragment .highlight-red}\nO evento falha aqui é ocorrer uma recaída na doença.\n:::\n\n## Método Kaplan-Meier {.smaller}\n\n::: panel-tabset\n### Ajuste\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(survival)\ntempo<- c(6,6,6,6,7,9,10,10,11,13,16,17,19,20,22,23,25,32,32,34,35)\nstatus<- c(1,1,1,0,1,0,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0) \ntempo2<- c(1,1,2,2,3,4,4,5,5,8,8,8,8,11,11,12,12,15,17,22,23)\nstatus2<- c(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1) \ntempo2g <- c(tempo,tempo2)\nstatus2g <- c(status,status2)\ngrupos <- c(rep(1,21),rep(2,21))\ndados <- data.frame(tempos=tempo2g, status=status2g, grupos=grupos)\najusteKM <- survfit(Surv(tempos, status) ~ grupos, data=dados, conf.type=\"log-log\")\n```\n````\n:::\n\n\n### Grafico\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Aula02A_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n:::\n\n## Método Kaplan-Meier {.smaller}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nsummary(ajusteKM)\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n```\nCall: survfit(formula = Surv(tempos, status) ~ grupos, data = dados, \n    conf.type = \"log-log\")\n\n                grupos=1 \n time n.risk n.event survival std.err lower 95% CI upper 95% CI\n    6     21       3    0.857  0.0764        0.620        0.952\n    7     17       1    0.807  0.0869        0.563        0.923\n   10     15       1    0.753  0.0963        0.503        0.889\n   13     12       1    0.690  0.1068        0.432        0.849\n   16     11       1    0.627  0.1141        0.368        0.805\n   22      7       1    0.538  0.1282        0.268        0.747\n   23      6       1    0.448  0.1346        0.188        0.680\n\n                grupos=2 \n time n.risk n.event survival std.err lower 95% CI upper 95% CI\n    1     21       2   0.9048  0.0641      0.67005        0.975\n    2     19       2   0.8095  0.0857      0.56891        0.924\n    3     17       1   0.7619  0.0929      0.51939        0.893\n    4     16       2   0.6667  0.1029      0.42535        0.825\n    5     14       2   0.5714  0.1080      0.33798        0.749\n    8     12       4   0.3810  0.1060      0.18307        0.578\n   11      8       2   0.2857  0.0986      0.11656        0.482\n   12      6       2   0.1905  0.0857      0.05948        0.377\n   15      4       1   0.1429  0.0764      0.03566        0.321\n   17      3       1   0.0952  0.0641      0.01626        0.261\n   22      2       1   0.0476  0.0465      0.00332        0.197\n   23      1       1   0.0000     NaN           NA           NA\n```\n:::\n:::\n\n\n## Método de Nelson-Aalen {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntempo<- c(6,6,6,6,7,9,10,10,11,13,16,17,19,20,22,23,25,32,32,34,35)\nstatus<- c(1,1,1,0,1,0,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0) \ntempo2<- c(1,1,2,2,3,4,4,5,5,8,8,8,8,11,11,12,12,15,17,22,23)\nstatus2<- c(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1) \ntempo2g <- c(tempo,tempo2)\nstatus2g <- c(status,status2)\ngrupos <- c(rep(1,21),rep(2,21))\ndados <- data.frame(tempos=tempo2g, status=status2g, grupos=grupos)\najusteNA <- survfit(Surv(tempos, status)~grupos, data = dados, stype=2, ctype=1, conf.type=\"log-log\")\n```\n:::\n\n\n## Gráfico Método Nelson-Aalen\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(survminer)\ngraf <- ggsurvplot(ajusteNA, data = dados, \n           risk.table = TRUE, \n           pval = FALSE, \n           conf.int = TRUE, \n           xlim = c(0,40), \n           xlab = \"Tempo em meses\", \n           ylab = \"S(t)\",\n           break.time.by = 10, \n           ggtheme = theme_light(), \n           risk.table.y.text.col = T, risk.table.y.text = FALSE \n)\n```\n````\n:::\n\n\n## Gráfico do Método Nelson-Aalen\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngraf\n```\n\n::: {.cell-output-display}\n![](Aula02A_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n\n\n## Método Nelson-Aalen {.smaller}\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nsummary(ajusteNA)\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n```\nCall: survfit(formula = Surv(tempos, status) ~ grupos, data = dados, \n    stype = 2, ctype = 1, conf.type = \"log-log\")\n\n                grupos=1 \n time n.risk n.event survival std.err lower 95% CI upper 95% CI\n    6     21       3    0.867  0.0715        0.642        0.955\n    7     17       1    0.817  0.0828        0.583        0.927\n   10     15       1    0.765  0.0927        0.522        0.895\n   13     12       1    0.704  0.1035        0.450        0.857\n   16     11       1    0.642  0.1111        0.386        0.814\n   22      7       1    0.557  0.1249        0.289        0.759\n   23      6       1    0.471  0.1317        0.211        0.696\n\n                grupos=2 \n time n.risk n.event survival std.err lower 95% CI upper 95% CI\n    1     21       2   0.9092  0.0612     0.683312        0.976\n    2     19       2   0.8183  0.0821     0.585744        0.928\n    3     17       1   0.7716  0.0898     0.535382        0.898\n    4     16       2   0.6809  0.0995     0.445010        0.833\n    5     14       2   0.5903  0.1048     0.360455        0.762\n    8     12       4   0.4229  0.1030     0.223432        0.610\n   11      8       2   0.3294  0.0991     0.151236        0.521\n   12      6       2   0.2360  0.0902     0.088391        0.423\n   15      4       1   0.1838  0.0840     0.056501        0.368\n   17      3       1   0.1317  0.0745     0.030135        0.309\n   22      2       1   0.0799  0.0603     0.010694        0.245\n   23      1       1   0.0294  0.0368     0.000845        0.172\n```\n:::\n:::\n",
    "supporting": [
      "Aula02A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}